name: Continuous Integration - Open PR - Workflow

on:
  push:
    branches:
      - '**'
      - '!main'
      - '!homolog'
      - '!dev'

permissions:
  contents: write
  pull-requests: write
jobs:
  productionPromotion:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: dev
      # - name: Extract branch name
      #   run: |
      #     echo "branch=${GITHUB_HEAD_REF:-${GITHUB_REF#refs/heads/}}"
      #     echo "branch=${GITHUB_HEAD_REF:-${GITHUB_REF#refs/heads/}}" >> $GITHUB_OUTPUT
      #   id: extract_branch
      # - name: Reset promotion branch
      #   run: |
      #     git fetch origin ${{ steps.extract_branch.outputs.branch }}:${{ steps.extract_branch.outputs.branch }}
      #     git reset --hard ${{ steps.extract_branch.outputs.branch }}
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v7
        with:
          branch: CHG-proj1

# permissions:
#   contents: write
#   pull-requests: write
# jobs:
#   productionPromotion:
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v4
#         with:
#           ref: dev
#       - name: Extract branch name
#         run: |
#           echo "branch=${GITHUB_HEAD_REF:-${GITHUB_REF#refs/heads/}}"
#           echo "branch=${GITHUB_HEAD_REF:-${GITHUB_REF#refs/heads/}}" >> $GITHUB_OUTPUT
#         id: extract_branch
#       # - name: Reset promotion branch
#       #   run: |
#       #     git fetch origin dev:dev
#       #     git reset --hard dev
#       - name: Create Pull Request
#         id: cpr
#         uses: peter-evans/create-pull-request@v7
#         with:
#           base: dev
#           branch: ${{ steps.extract_branch.outputs.branch }}
#       - name: Check outputs
#         if: ${{ steps.cpr.outputs.pull-request-number }}
#         run: |
#           echo "Pull Request Number - ${{ steps.cpr.outputs.pull-request-number }}"
#           echo "Pull Request URL - ${{ steps.cpr.outputs.pull-request-url }}"